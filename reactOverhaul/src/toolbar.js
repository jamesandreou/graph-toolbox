import React, { Component } from 'react';
import { Tool } from './tool';

export class Toolbar extends Component{

	constructor(){
		super();	
		this.state = {
			active : 'sel',
			toolSize : 64
		};
	}

	componentWillMount() {
		this.state.toolSize = this.props.size;
	}

	componentWillUpdate() {
		this.state.toolSize = this.props.size;
	}

	handleClick(i){
		this.props.onUpdate({activeTool : this.props.tools[i]});
		this.setState({active : this.props.tools[i]});
	}

	render(){
		let style = {
			background : '#121314',
			position: "absolute",
			top : "0",
			left : "0",
			textAlign : "center",
			width : this.state.toolSize,
			height : "100%",
			overflow : "hidden"
		};
		let padding = {
			width : this.state.toolSize,
			height : Math.floor(this.state.toolSize * 0.25)
		}
		return (
			<div style={style}>
				<svg viewBox="0 0 64 64" width={this.state.toolSize * 0.9} height={this.state.toolSize * 0.9} preserveAspectRatio="xMidYMid meet" fitstyle={{verticalAlign: "middle"}}>
					{this.renderBanner()}
				</svg>
				<div style={padding}></div>
				{this.props.tools.map(function(tool, i) {
		          return (
		            <Tool onClickEvent={this.handleClick.bind(this, i)} key={i} type={tool}
		            size={this.state.toolSize} active={this.state.active === tool} />
		          );
		        }, this)}
		        <div style={padding}></div>
		        <div style={padding}></div>
		        <svg viewBox="0 0 64 64" width={this.state.toolSize} height={Math.floor(this.props.state.screen.height * 0.04)} preserveAspectRatio="xMidYMid meet" fitstyle={{verticalAlign: "middle"}}>
					{this.renderHelp()}
				</svg>
			</div>
		);
	}

	renderBanner(){
		return (
			<g transform="translate(0,-988.36218)">
			<rect rx="0" height="6" width="54" y="1044.4" x="5" fill="#fff"/>
			<rect rx="0" height="6" width="54" y="1036.4" x="5" fill="#fff"/>
			<rect rx="0" height="6.1339" width="54" y="1028.2" x="5" fill="#fff"/>
			<path fill="#fff" d="M11.312,7.5938l1.563,4.0622-2.313,5.469-5.1558-2.594-1.5624-4.093c-2.2851,2.163-3.2716,5.171-2.25,7.843,1.125,2.943,4.3363,4.562,7.875,4.313l5.8752,15.375h6.625l-6.719-17.563c2.801-2.174,4.093-5.526,2.969-8.468-1.02-2.6672-3.769-4.25-6.907-4.3442zm4.782,32.375l1.875,4.906,5.781-2.219-1.031-2.687h-6.625z" transform="translate(0,988.36218)"/>
			<path fill="#fff" d="M49.719,17.594c-3.099,0.127-6.4,1.511-7.969,4.312-0.292,0.296-0.124,0.838,0.281,0.469,1.859-1.015,4.042-1.799,6.188-1.437,1.42,0.206,2.46,1.455,2.719,2.812,0.274,1.149,0.279,2.427-0.313,3.5-1.432,3.564-2.839,7.142-4.25,10.719h3.187c1.363-3.473,2.735-6.942,4.126-10.407,0.248-0.828,0.739-1.686,1.656-1.874,0.789-0.188,1.602,0.154,2.281,0.531,0.536,0.307,0.423,0.961,0.156,1.406-0.304,0.553-0.105,1.295,0.5,1.531,0.603,0.326,1.554,0.594,2-0.125,0.435-0.785,0.601-1.661,1-2.469,0.539-1.42,1.199-2.81,1.563-4.281-0.01-0.138-0.023-0.286-0.094-0.406-0.392-0.534-1.13-0.848-1.781-0.844-0.612,0.066-0.953,0.667-1.031,1.219-0.278,0.63-1.1,0.683-1.626,0.344-0.882-0.287-1.801-0.951-1.75-1.969-0.03-0.485,0.229-0.945,0.282-1.406-0.544-0.532-1.394-0.459-2.032-0.844-1.595-0.706-3.376-0.821-5.093-0.781z" transform="translate(0,988.36218)"/>
			<path fill="#fff" d="M19.938,27.375l1.156,3.094h10.187l-0.656-3.063,0.125-0.031h-10.812zm15.75,0l0.624,3.094h10.813l1.187-3.094h-12.624z" transform="translate(0,988.36218)"/>
			<path fill="#fff" d="M9.1875,27.469l-3.5,10.5h3.2813l1.9372-5.907-1.6872-4.593h-0.0313zm2.4685,0.843l0.25,0.688,0.188-0.531-0.438-0.157zm-6.6248,11.657l2.9376,1.031,0.3437-1.031h-3.2813z" transform="translate(0,988.36218)"/>
			<path fill="#fff" d="M53.25,28.562l-1.25,0.407,0.5,1.5,0.75-1.907zm2,0.313l-1.75,4.531,1.531,4.563h3.25l-3.031-9.094zm0.469,11.094l0.437,1.281,2.906-0.969-0.093-0.312h-3.25z" transform="translate(0,988.36218)"/>
			<path fill="#fff" d="M6.875,3.0938c-2.3176,0-4.1875,1.9011-4.1875,4.2187s1.8699,4.1875,4.1875,4.1875,4.187-1.8699,4.187-4.1875-1.8694-4.2187-4.187-4.2187zm0.0938,1.0937c0.2752,0,0.5308-0.0081,0.75,0.0313,0.2247,0.0337,0.4051,0.0744,0.5624,0.125,0.163,0.0449,0.3052,0.1056,0.4063,0.1562,0.1067,0.0506,0.1738,0.0969,0.2187,0.125l-0.375,1.0625c-0.1797-0.0955-0.389-0.1826-0.625-0.25-0.2303-0.073-0.4747-0.125-0.75-0.125-0.6123,0-1.0684,0.1885-1.3437,0.5313-0.2697,0.337-0.4063,0.785-0.4063,1.375,0,0.2865,0.0264,0.5452,0.0938,0.7812,0.0674,0.2304,0.1777,0.4252,0.3125,0.5938,0.1348,0.1685,0.2977,0.3107,0.5,0.4062,0.2023,0.0899,0.4491,0.125,0.7187,0.125,0.1461,0,0.2739,0.0056,0.375,0,0.1068-0.0056,0.2026-0.0144,0.2813-0.0312v-2.0313h1.3125v2.9063c-0.1573,0.0622-0.4329,0.1202-0.7812,0.1872-0.3484,0.073-0.77,0.094-1.2813,0.094-0.4382,0-0.8279-0.053-1.1875-0.188-0.354-0.1343-0.6534-0.3348-0.9062-0.5932-0.2529-0.2585-0.4533-0.5924-0.5938-0.9688-0.1348-0.3764-0.2188-0.7981-0.2188-1.2812,0-0.4888,0.0984-0.9049,0.25-1.2813,0.1517-0.3764,0.361-0.7103,0.625-0.9687,0.2641-0.2641,0.5523-0.459,0.9063-0.5938,0.3596-0.1348,0.7517-0.1875,1.1563-0.1875z" transform="translate(0,988.36218)"/>
			<path fill="#fff" d="M50.969,9.1875c-2.318,0-4.188,1.8695-4.188,4.1875s1.87,4.187,4.188,4.187c2.317,0,4.219-1.869,4.219-4.187s-1.902-4.1875-4.219-4.1875zm-2.407,1.2815h4.844v1.125h-1.781v4.718h-1.313v-4.718h-1.75v-1.125z" transform="translate(0,988.36218)"/>
			<path fill="#fff" d="M34.188,30.688c-2.318,0-4.188,1.901-4.188,4.218,0,1.216,0.52,2.299,1.344,3.063h5.687c0.832-0.764,1.375-1.847,1.375-3.063,0-2.317-1.901-4.218-4.218-4.218zm-0.25,1.062c0.37,0,0.69,0.006,1,0.062,0.314,0.051,0.587,0.153,0.812,0.282s0.408,0.286,0.531,0.5c0.129,0.208,0.188,0.472,0.188,0.781,0,0.466-0.207,0.855-0.657,1.125,0.371,0.14,0.616,0.321,0.75,0.562,0.135,0.242,0.188,0.51,0.188,0.813,0,0.612-0.207,1.066-0.656,1.375-0.444,0.309-1.118,0.469-2,0.469-0.32,0-0.649-0.009-0.969-0.031-0.315-0.017-0.626-0.052-0.969-0.126v-5.656c0.27-0.05,0.555-0.102,0.875-0.125,0.32-0.028,0.631-0.031,0.907-0.031zm-0.5,1.062v1.282h0.624c0.405,0,0.701-0.055,0.876-0.156,0.174-0.107,0.281-0.27,0.281-0.5,0-0.236-0.102-0.405-0.281-0.5-0.18-0.096-0.433-0.125-0.782-0.126-0.112,0.001-0.246-0.005-0.375,0-0.129,0.001-0.242-0.011-0.343,0zm0,2.282v1.531c0.095,0.011,0.2-0.006,0.312,0s0.24,0.031,0.375,0.031c0.393,0,0.696-0.075,0.937-0.187,0.242-0.113,0.375-0.322,0.376-0.625-0.001-0.27-0.111-0.45-0.313-0.563-0.202-0.118-0.499-0.187-0.875-0.187h-0.812z" transform="translate(0,988.36218)"/>
			<rect transform="translate(0,988.36218)" height="0.26786" width="0.066964" y="34.179" x="38.415" fill="#FF0"/>
			<path strokeLinejoin="miter" d="m47.856,12.103s-6.2512-10.493-31.334-9.3812c-7.3474,0.32575-6.7992,2.9415-6.7992,2.9415s18.94-1.389,24.875,25.759" transform="translate(0,988.36218)" stroke="#fff" strokeLinecap="butt" strokeWidth="1px" fill="none"/>
			</g>
		);
	}

	renderHelp(){
		return (
			 <g>
			  <path stroke="#000000" d="m31.89804,1.82571c-17.02953,0 -30.83476,13.50728 -30.83476,30.17023c0,16.66295 13.80523,30.17023 30.83476,30.17023c17.02957,0 30.8348,-13.50729 30.8348,-30.17023c0,-16.66295 -13.80523,-30.17023 -30.8348,-30.17023zm2.81719,47.54709l-5.74278,0l0,-5.38971l5.74278,0l0,5.38971zm0,-11.14312l0,1.78035l-5.74278,0l0,-2.19421c0,-6.62091 7.70127,-7.67189 7.70127,-12.37697c0,-2.14689 -1.96024,-3.79107 -4.52718,-3.79107c-2.66121,0 -4.99418,1.91754 -4.99418,1.91754l-3.26964,-3.97476c0,0 3.22249,-3.28757 8.77669,-3.28757c5.27705,0 10.1747,3.19618 10.1747,8.58495c0.00269,7.53992 -8.11888,8.40902 -8.11888,13.34174z" strokeWidth="0" fill="#5c5c5c"/>
			 </g>
		);
	}

}